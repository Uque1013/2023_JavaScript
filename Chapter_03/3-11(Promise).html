!<html>
<head>
    <title>Promise</title>
</head>
<body>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.1.2/dist/axios.min.js"></script>
    <script>
        // var x = 1;
        // // (가정) 서버를 호출해서 서버로부터 데이터를 가져옴.
        // var y = callServerData(); 
        // var z = x + y; // 서버로부터 y값을 받아오지 전에 실행되면, 에러 발생

        // 서버 생성 & 데이터 초기화
        // 임시 mock 서버에 업로드한 데이터 로드
        var url = "https://78aeb894-7efa-4ce7-a6fe-5ef1b0f62dab.mock.pstmn.io/productList";

        // axios 외부 라이브러리 : 서버-클라이언트가 데이터 통신을 위한 Open 소스 라이브러리
        // axios.get(url).then(function (response) {
        //     // console.log(response.data);
        //     return response.data;
        // });

        // var total = 0;
        // for(var itme of data) {
        //     total += item.price;
        // }
        // console.log(total); // 에러 발생 : 서버로부터 데이터를 가져오기 전에 for문이 실행됨

        function getData() {
            return new Promise(function(reseolve, reject){  // resolve : 정상적으로 실행, reject : 취소
                var data = axios.get(url).then(function (response) {
                    // console.log(response.data);
                    reseolve(response.data);
                    // reject(response.data);
                });
            });
        }

        var total = 0;
        getData().then(function(data){
            for(var itme of data.products) {
            total += item.price;
            }
            console.log(total);
        });

    </script>
</body>
</html>